<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>enableL8RuleSharing</title>
<link href="../../../../../../images/logo-icon.svg" rel="icon" type="image/svg"><script>var pathToRoot = "../../../";</script><script type="text/javascript" src="../../../scripts/sourceset_dependencies.js" async="async"></script><link href="../../../styles/style.css" rel="Stylesheet"><link href="../../../styles/logo-styles.css" rel="Stylesheet"><link href="../../../styles/jetbrains-mono.css" rel="Stylesheet"><link href="../../../styles/main.css" rel="Stylesheet"><script type="text/javascript" src="../../../scripts/clipboard.js" async="async"></script><script type="text/javascript" src="../../../scripts/navigation-loader.js" async="async"></script><script type="text/javascript" src="../../../scripts/platform-content-handler.js" async="async"></script><script type="text/javascript" src="../../../scripts/main.js" async="async"></script>  </head>
  <body>
    <div id="container">
      <div id="leftColumn"><a href="../../../index.html">
          <div id="logo"></div>
        </a>
        <div id="paneSearch"></div>
        <div id="sideMenu"></div>
      </div>
      <div id="main">
        <div id="leftToggler"><span class="icon-toggler"></span></div>
<script type="text/javascript" src="../../../scripts/main.js"></script>        <div class="main-content" id="content" pageIds="keeper-gradle-plugin::com.slack.keeper/KeeperExtension/enableL8RuleSharing/#/PointingToDeclaration//769193423">
          <div class="navigation-wrapper" id="navigation-wrapper">
            <div class="breadcrumbs"><a href="../../../index.html">keeper-gradle-plugin</a>/<a href="../index.html">com.slack.keeper</a>/<a href="index.html">KeeperExtension</a>/<a href="enable-l8-rule-sharing.html">enableL8RuleSharing</a></div>
            <div class="pull-right d-flex">
              <div id="searchBar"></div>
            </div>
          </div>
          <div class="cover ">
            <h1 class="cover"><span>enable</span><wbr></wbr><span>L8</span><wbr></wbr><span>Rule</span><wbr></wbr><span>Sharing</span></h1>
          </div>
<div class="divergent-group" data-filterable-current=":dokkaHtml/main" data-filterable-set=":dokkaHtml/main"><div class="with-platform-tags"><span class="pull-right"></span></div>

  <div>
    <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-depenent-content" data-active="" data-togglable=":dokkaHtml/main"><div class="symbol monospace">val <a href="enable-l8-rule-sharing.html">enableL8RuleSharing</a>: <a href="https://docs.gradle.org/7.0.2/javadoc/index.html/org/gradle/api/provider/Property.html">Property</a>&lt;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html">Boolean</a>&gt;<span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></div></div>
  </div>
<p class="paragraph">Enables L8 rule sharing. By default, L8 will generate separate rules for test app and androidTest app L8 rules. This can cause problems in minified tests for a couple reasons though! This tries to resolve these via two steps.</p><p class="paragraph">Issue 1: L8 will try to obfuscate this otherwise and can result in conflicting class names between the app and test APKs. This is a little confusing because L8 treats &quot;minified&quot; as &quot;obfuscated&quot; and tries to match. Since we don't care about obfuscating here, we can just disable it.</p><p class="paragraph">Issue 2: L8 packages <code>j$</code> classes into androidTest but doesn't match what's in the target app. This causes confusion when invoking code in the target app from the androidTest classloader and it then can't find some expected <code>j$</code> classes. To solve this, we feed the the app's generated <code>j$</code> rules in as inputs to the androidTest L8 task's input rules.</p><p class="paragraph">More details can be found here: https://issuetracker.google.com/issues/158018485</p><p class="paragraph">Patches the <span data-unresolved-link="com.android.build.gradle.internal.tasks/L8DexDesugarLibTask///PointingToDeclaration/">L8DexDesugarLibTask</span>.</p></div>
        </div>
        <div class="footer"><span class="go-to-top-icon"><a href="#content"></a></span><span>Â© 2021 Copyright</span><span class="pull-right"><span>Generated by </span><a href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span></div>
      </div>
    </div>
  </body>
</html>

